<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/node-mongodb-native/2.0/img/favicon.png">

    <title>ObjectId</title>

    <link href="/node-mongodb-native/2.0/css/bootstrap-theme.css" rel="stylesheet">
    <link href="/node-mongodb-native/2.0/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/node-mongodb-native/2.0/css/style.css" rel="stylesheet">
    <link href="/node-mongodb-native/2.0/css/style-responsive.css" rel="stylesheet" />
    <link href="/node-mongodb-native/2.0/css/monokai_sublime.css" rel="stylesheet" />

  </head>

  <body>
  
  <section id="container" class="">

      
      <header class="header black-bg">
            <div class="toggle-nav">
                <i class="fa fa-bars"></i>
                <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
            </div>

            
            <a href="http://learnmongodbthehardway.com/" class="logo"><img src="/node-mongodb-native/2.0/img/logo-mongodb-header.png" style="height:40px;"></a>

            
            <div class="top-nav notification-row">
                
                <div class="hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="mongodb" data-repo="node-mongodb-native"></span>
                    <a href='http://travis-ci.org/mongodb/node-mongodb-native'><img src='https://secure.travis-ci.org/mongodb/node-mongodb-native.png'/><a>
                </div>
            </div>

            <div class="nav title-row" id="top_menu">
                <h1 class="nav top-menu"> MongoDB 2.0.0 Driver </h1>
            </div>
      </header>
      


<aside>
    <div id="sidebar"  class="nav-collapse ">
        
        <ul class="sidebar-menu">
          
          
              
                <li>
                <a class="" href="http://learnmongodbthehardway.com">
                    <i class='fa fa-file-text'></i>
                    
                    <span>driver portal</span>
                </a>
              
              </li>
          
              
                <li>
                <a class="" href="http://mongodb.org">
                    <i class='fa fa-file-text'></i>
                    
                    <span>Mongo DB Docs</span>
                </a>
              
              </li>
          
              
                <li>
                <a class="" href="http://mongodb.github.io/node-mongodb-native/1.4/">
                    <i class='fa fa-file-text'></i>
                    
                    <span>legacy docs 1.4.X</span>
                </a>
              
              </li>
          
              
                <li>
                <a class="" href="http://mongodb.github.com/node-mongodb-native/core">
                    <i class='fa fa-file-text'></i>
                    
                    <span>Core driver docs</span>
                </a>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-gift'></i>
                
                <span>about driver</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/node-mongodb-native/2.0/meta/license/"> License </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/meta/release-notes/"> Release Notes </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/meta/changes-from-1.0/"> Migrating to 2.X </a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-road'></i>
                
                <span>getting started</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/node-mongodb-native/2.0/overview/introduction/"> Introduction </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/overview/installing/"> Installing The Driver </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/overview/quickstart/"> QuickStart </a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-file-text'></i>
                
                <span>api</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/node-mongodb-native/2.0/api-docs/"> API Documentation </a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-group'></i>
                
                <span>community</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/node-mongodb-native/2.0/community/mailing-list/"> Mailing List </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/community/contributing/"> Contributing </a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu active">
            <a href="javascript:;" class="">
                <i class='fa fa-book'></i>
                
                <span>tutorials</span>
                <span class="menu-arrow fa fa-angle-down"></span>
            </a>
                <ul class="sub open">
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/connecting/"> Connecting To MongoDB </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/connection_failures/"> Connection Failures </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/urls/"> Connection URI </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/crud_operations/"> CRUD Operations </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/aggregation/"> Aggregation </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/streams/"> Streams </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/gridfs/"> GridFS </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/logging/"> Logging </a> </li>
                    
                    <li class="active"><a href="/node-mongodb-native/2.0/tutorials/objectid/"> ObjectId </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/tutorials/tracing/"> Tracing </a> </li>
                    
                </ul>
              
              </li>
          
              

            <li class="sub-menu">
            <a href="javascript:;" class="">
                <i class='fa fa-book'></i>
                
                <span>articles</span>
                <span class="menu-arrow fa fa-angle-right"></span>
            </a>
                <ul class="sub">
                    
                    <li><a href="/node-mongodb-native/2.0/articles/node_knockout_article_1/"> Node Knockout, Basics </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/articles/node_knockout_article_2/"> Node Knockout, GridFS </a> </li>
                    
                    <li><a href="/node-mongodb-native/2.0/articles/node_knockout_article_3/"> Node Knockout, GEO </a> </li>
                    
                </ul>
              
              </li>
          
            <li> <a href="https://jira.mongodb.org/browse/NODE" target="blank"><i class='fa fa-life-ring'></i>Issues & Help</a> </li>
            
              <li><a href="https://github.com/mongodb/node-mongodb-native/docs/content/tutorials/objectid.md" target="blank"><i class='fa fa-edit'></i> Refine this Page</a> </li>
            
            <li><a href='https://gitter.im/mongodb/node-mongodb-native?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge'><img src='https://badges.gitter.im/Join Chat.svg'/></a></li>
        </ul>
        
    </div>
</aside>



      
      <section id="main-content">
          <section class="wrapper">

              
                  
                      
                      
                          
                          
                          
                      
                      
                  
              

              <div class="row">
                  <div class="col-md-1">
                      
                      
                      <a class="navigation prev" href="../../tutorials/logging">
                      <i class="fa fa-angle-left"></i>
                      </a>
                      
                      
                  </div>
                <div class="col-md-10">
                    <section class="panel">
                          
                              
                          
                    <div class="panel-body">



<h1 id="objectid:87db98e845d73c39820e3d0d7c99aa58">ObjectId</h1>

<p>The ObjectId class is the default primary key for a MongoDB document and is usually found in the <code>_id</code> field in an inserted document. Let&rsquo;s look at an example.</p>

<pre><code class="language-json">{
    &quot;_id&quot;: ObjectId(&quot;54759eb3c090d83494e2d804&quot;)
}
</code></pre>

<p>An ObjectId is a 12 byte binary BSON type that contain any 12 bytes you want. To be helpful in generating ObjectIds MongoDB drivers and the server will generate them using a default Algorithm. A ObjectId&rsquo;s 12 bytes will be then contain the following.</p>

<table>
<thead>
<tr>
<th>Size</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>4 bytes</td>
<td align="left">a 4-byte value representing the seconds since the Unix epoch</td>
</tr>

<tr>
<td>3 bytes</td>
<td align="left">a 3-byte machine identifier</td>
</tr>

<tr>
<td>2 bytes</td>
<td align="left">2-byte process id</td>
</tr>

<tr>
<td>3 bytes</td>
<td align="left">3-byte counter, starting with a random value</td>
</tr>
</tbody>
</table>

<p>In the driver you can tap into this by simply creating a new ObjectId. Let&rsquo;s look at an example that will create an ObjectId that contains a 12 byte description that matches this specification.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId();
console.log(id)
</code></pre>

<p>This will print a hexadecimal representation of the 12 byte ObjectId the driver generated.</p>

<p>It&rsquo;s equally valid to just pass it a 12 byte string (buffer is not currently supported but will be sometime soon). Let&rsquo;s create our own definition of a 12 byte ObjectId.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId(&quot;aaaaaaaaaaaa&quot;);
console.log(id)
</code></pre>

<p>This will print the hexadecimal value <code>616161616161616161616161</code> which corresponds to the string <code>aaaaaaaaaaaa</code></p>

<h2 id="properties-of-a-generated-objectid:87db98e845d73c39820e3d0d7c99aa58">Properties of a Generated ObjectId</h2>

<p>One of the main reasons ObjectId&rsquo;s are generated in the fashion mentioned above by the drivers is that is contains a useful behavior due to the way sorting works. Given that it contains a 4 byte timestamp (resolution of seconds) and an incrementing counter as well as some more unique identifiers such as the machine id once can use the <code>_id</code> field to sort documents in the order of creation just by simply sorting on the <code>_id</code> field. This can be useful to save the space needed by an additional timestamp if you wish to track the time of creation of a document.</p>

<h2 id="driver-objectid-constructor-methods:87db98e845d73c39820e3d0d7c99aa58">Driver ObjectId Constructor methods</h2>

<p>The driver allows you to create ObjectId&rsquo;s in a couple of ways as well as allowing you to introspects aspects of the ObjectId.</p>

<p>Let&rsquo;s look at the actual constructor options. The constructor lets you pass in a 12 byte string or a 24 byte hexadecimal representation as well as no arguments.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId();
</code></pre>

<p>Creates a new generated ObjectId using the algorithm outlined above.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId(&quot;aaaaaaaaaaaa&quot;);
</code></pre>

<p>Creates a new specific ObjectId using the 12 byte string.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId(&quot;616161616161616161616161&quot;);
</code></pre>

<p>Creates a new specific ObjectId using the 24 byte hexadecimal 12 byte string representation. This is useful for when you are passing back Id&rsquo;s from a web application.</p>

<h2 id="driver-objectid-static-methods:87db98e845d73c39820e3d0d7c99aa58">Driver ObjectId Static methods</h2>

<p>The ObjectId static methods are meant to be helpful in making it more explicit what your intention is when creating a new ObjectId.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = ObjectId.createPk();
</code></pre>

<p>Creates a new ObjectId instance with a generated key using the algorithm outlined above.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = ObjectId.createFromTime(5000);
</code></pre>

<p>Creates an ObjectId from a seconds timestamp with the rest of the bytes in the ObjectId zeroed out.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = ObjectId.createFromHexString(&quot;616161616161616161616161&quot;);
</code></pre>

<p>Creates and ObjectId from the 24 byte hexadecimal representation of a 12 byte string.</p>

<h2 id="driver-objectid-instance-methods:87db98e845d73c39820e3d0d7c99aa58">Driver ObjectId Instance methods</h2>

<p>The more interesting methods on an ObjectId instance are the following.</p>

<h3 id="gettimestamp:87db98e845d73c39820e3d0d7c99aa58">getTimestamp()</h3>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId();
console.log(id.getTimestamp())
</code></pre>

<p>This method returns a Date object representing the timestamp part of the 12 byte ObjectId as defined by the algorithm above. If the ObjectId is generated by the algorithm you will get the creation time Date object back. However if it&rsquo;s just a random 12 byte sequence obviously the date coming back might be nonsensical.</p>

<h3 id="tohexstring:87db98e845d73c39820e3d0d7c99aa58">toHexString()</h3>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId(&quot;aaaaaaaaaaaa&quot;);
console.log(id.toHexString())
</code></pre>

<p>This will print out the hexadecimal representation of the ObjectId.</p>

<h2 id="on-buffers:87db98e845d73c39820e3d0d7c99aa58">On Buffers</h2>

<p>Until the ObjectId natively accepts a buffer the best way to transform a Buffer into a valid ObjectId is to do the following.</p>

<pre><code class="language-javascript">var ObjectId = require('mongodb').ObjectID
var id = new ObjectId(new Buffer(&quot;aaaaaaaaaaaa&quot;).toString());
console.log(id.toHexString())
</code></pre>

<p>By converting the buffer into it&rsquo;s string representation we can correctly create a new ObjectId.</p>

                      
                      <div id="disqus_thread"></div>
                      <script type="text/javascript">
                           
                          var disqus_shortname = 'nodejsmongodbdriver'; 

                           
                          (function() {
                              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                      </script>
                      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                      
                    </div>
                    </section>
                </div>
                <div class="col-md-1">
                    
                    
                    <a class="navigation next" href="../../tutorials/tracing">
                        <i class="fa fa-angle-right"> </i>
                    </a>
                    
                    
                </div>
              </div>
              
          </section>
      </section>
     
  </section>
  
    
    <script src="/node-mongodb-native/2.0/js/jquery-2.1.1.min.js"></script>
    <script src="/node-mongodb-native/2.0/js/jquery.scrollTo.min.js"></script>
    <script src="/node-mongodb-native/2.0/js/bootstrap.min.js"></script>
    
    <script src="/node-mongodb-native/2.0/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/node-mongodb-native/2.0/js/scripts.js"></script>
    <script async defer id="github-bjs" src="/node-mongodb-native/2.0/js/buttons.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29229787-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>

